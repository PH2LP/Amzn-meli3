# ğŸ¨ Web UI - Features y DiseÃ±o

## ğŸ¯ Objetivo

Interfaz web simple y elegante para controlar el sistema AMZâ†’ML desde cualquier dispositivo.

---

## ğŸ“± 3 Modos de Vista

### **1. Modo Simple (Default)**

Vista minimalista estilo iOS con toggles on/off:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AMZ â†’ ML Control Panel                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  ğŸ¤– Sistema AutÃ³nomo         [ON ] ğŸŸ¢   â”‚
â”‚     Busca y publica productos            â”‚
â”‚                                          â”‚
â”‚  ğŸ’¬ Auto Responder          [ON ] ğŸŸ¢   â”‚
â”‚     Responde preguntas clientes          â”‚
â”‚                                          â”‚
â”‚  ğŸ’¾ Backups                 [ON ] ğŸŸ¢   â”‚
â”‚     Backups cada 6 horas                 â”‚
â”‚                                          â”‚
â”‚  ğŸ“Š Pricing DinÃ¡mico        [OFF] âš«   â”‚
â”‚     Actualiza precios automÃ¡ticamente    â”‚
â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ˆ EstadÃ­sticas RÃ¡pidas                â”‚
â”‚                                          â”‚
â”‚  Productos publicados:  8,342            â”‚
â”‚  Ãšltimas 24h:           156              â”‚
â”‚  Preguntas respondidas: 423              â”‚
â”‚  Ãšltimo backup:         Hace 2 horas     â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **2. Modo Pro (ConfiguraciÃ³n Avanzada)**

Configuraciones detalladas del sistema:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸  ConfiguraciÃ³n Avanzada              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  ğŸ’° PRICING & MARKUP                     â”‚
â”‚  â”œâ”€ Markup Global:        [500] %       â”‚
â”‚  â”œâ”€ Precio MÃ­nimo:        [$1000]       â”‚
â”‚  â”œâ”€ Precio MÃ¡ximo:        [$999999]     â”‚
â”‚  â”œâ”€ Stock Default:        [100]         â”‚
â”‚  â””â”€ Tax Florida:          [7] %         â”‚
â”‚                                          â”‚
â”‚  ğŸ¤– SISTEMA AUTÃ“NOMO                     â”‚
â”‚  â”œâ”€ Keywords por ciclo:   [1]           â”‚
â”‚  â”œâ”€ ASINs por keyword:    [150]         â”‚
â”‚  â”œâ”€ Delay entre ciclos:   [60] min      â”‚
â”‚  â””â”€ PaÃ­ses activos:       â–¡ AR â–¡ MX     â”‚
â”‚                                          â”‚
â”‚  ğŸ” FILTROS DE PRODUCTOS                 â”‚
â”‚  â”œâ”€ Filtrar Prime:        [âœ“]           â”‚
â”‚  â”œâ”€ Filtrar por BSR:      [âœ“]           â”‚
â”‚  â”œâ”€ Marcas prohibidas:    [Editar...]   â”‚
â”‚  â””â”€ CategorÃ­as block:     [Editar...]   â”‚
â”‚                                          â”‚
â”‚  ğŸ’¬ AUTO-RESPONDER                       â”‚
â”‚  â”œâ”€ Respuesta automÃ¡tica: [âœ“]           â”‚
â”‚  â”œâ”€ Delay respuesta:      [30] min      â”‚
â”‚  â”œâ”€ Usar templates:       [âœ“]           â”‚
â”‚  â””â”€ Usar AI (OpenAI):     [âœ“]           â”‚
â”‚                                          â”‚
â”‚  ğŸ’¾ BACKUPS                               â”‚
â”‚  â”œâ”€ Frecuencia:           [6] horas     â”‚
â”‚  â”œâ”€ Google Drive:         [âœ“]           â”‚
â”‚  â”œâ”€ Dropbox:              [âœ“]           â”‚
â”‚  â””â”€ Mantener local:       [7] dÃ­as      â”‚
â”‚                                          â”‚
â”‚  [ğŸ’¾ Guardar Cambios]                    â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Campos editables:**

#### **ğŸ’° Pricing:**
- `PRICE_MARKUP` (500%) - Markup/ganancia en %
- `PRICE_MARKUP_PERCENT` (50%) - Para net proceeds
- `DEFAULT_PRICE` ($1000) - Precio fallback
- `DEFAULT_QUANTITY` (100) - Stock default
- `FLORIDA_TAX_PERCENT` (7%) - Tax Florida

#### **ğŸ¤– AutÃ³nomo:**
- Keywords por ciclo
- ASINs por keyword
- Enable BSR ranking
- Enable Prime filter
- PaÃ­ses target (AR, MX, CL, etc.)

#### **ğŸ” Filtros:**
- Brand blacklist (textarea)
- CategorÃ­as bloqueadas
- Keywords irrelevantes
- Product types prohibidos

#### **ğŸ’¬ Auto-answer:**
- Enable/disable
- Delay entre respuestas
- Usar templates (0 tokens)
- Usar AI (cuando no hay template)

#### **ğŸ’¾ Backups:**
- Frecuencia (horas)
- Destinos (Google Drive, Dropbox, S3)
- RetenciÃ³n local (dÃ­as)

---

### **3. Modo Logs (Monitoreo)**

Logs en tiempo real con streaming:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Logs en Tiempo Real                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Filtros: [Sistema AutÃ³nomo â–¼]          â”‚
â”‚           â–¡ Errors  â–¡ Warnings  â˜‘ All   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [14:23:45] ğŸ”„ CICLO #42            â”‚ â”‚
â”‚  â”‚ [14:23:46] ğŸ” Keyword: backpacks  â”‚ â”‚
â”‚  â”‚ [14:24:12] âœ… 422 ASINs encontr.  â”‚ â”‚
â”‚  â”‚ [14:24:15] ğŸ”¥ Filtrando marcas... â”‚ â”‚
â”‚  â”‚ [14:25:01] âœ… 418 ASINs permitid. â”‚ â”‚
â”‚  â”‚ [14:25:03] ğŸ“Š Analizando calidad  â”‚ â”‚
â”‚  â”‚ [14:25:45] â­ EXCELENTE keyword   â”‚ â”‚
â”‚  â”‚ [14:26:10] ğŸ“Š Ordenando por BSR   â”‚ â”‚
â”‚  â”‚ [14:30:22] âœ… 150 ASINs finales   â”‚ â”‚
â”‚  â”‚ [14:30:22] ğŸ’¾ Guardados en asins  â”‚ â”‚
â”‚  â”‚ [14:30:25] ğŸš€ Iniciando public... â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  [â¸ï¸ Pausar] [â¬‡ï¸ Descargar] [ğŸ”„ Refr.]  â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Opciones de logs:**
- Sistema AutÃ³nomo
- Auto Responder
- Main2 (Publicaciones)
- Backups
- Pricing Updates
- Sistema (General)

**Filtros:**
- All / Errors only / Warnings only
- Ãšltima hora / 24h / 7 dÃ­as

---

## ğŸ› ï¸ Stack TÃ©cnico

### **Backend:**
```python
Flask==3.0.0           # Web framework
Flask-SocketIO==5.3.5  # WebSocket para logs en vivo
psutil==5.9.6          # Control de procesos
```

### **Frontend:**
```javascript
Alpine.js (15KB)       # Reactivity
Tailwind CSS (CDN)     # Styling
Socket.IO (client)     # Real-time logs
```

---

## ğŸ“¡ API Endpoints

### **Control de Servicios:**
```python
POST /api/services/pipeline/start
POST /api/services/pipeline/stop
POST /api/services/pipeline/restart
GET  /api/services/pipeline/status

POST /api/services/auto-answer/start
POST /api/services/auto-answer/stop
GET  /api/services/auto-answer/status

POST /api/services/backup/start
POST /api/services/backup/stop
GET  /api/services/backup/status
```

### **ConfiguraciÃ³n:**
```python
GET  /api/config                    # Obtener toda la config
POST /api/config/pricing            # Actualizar pricing
POST /api/config/autonomous         # Actualizar autÃ³nomo
POST /api/config/filters            # Actualizar filtros
POST /api/config/auto-answer        # Actualizar auto-answer
POST /api/config/backups            # Actualizar backups
```

### **EstadÃ­sticas:**
```python
GET /api/stats/products             # Total productos
GET /api/stats/questions            # Preguntas respondidas
GET /api/stats/backups              # Ãšltimo backup
GET /api/stats/performance          # CPU, RAM, Disco
```

### **Logs:**
```python
GET  /api/logs/autonomous?hours=24  # Logs sistema autÃ³nomo
GET  /api/logs/auto-answer?hours=24
GET  /api/logs/main2?hours=24
WS   /api/logs/stream               # Stream en tiempo real
```

---

## ğŸ¨ DiseÃ±o UI

### **Colores (Modo Claro):**
```
Background:  #FFFFFF
Text:        #1F2937
Accent:      #3B82F6 (blue)
Success:     #10B981 (green)
Warning:     #F59E0B (amber)
Error:       #EF4444 (red)
```

### **Colores (Modo Oscuro):**
```
Background:  #1F2937
Text:        #F9FAFB
Accent:      #60A5FA (light blue)
Success:     #34D399 (light green)
Warning:     #FBBF24 (light amber)
Error:       #F87171 (light red)
```

### **Toggle Switch (iOS Style):**
```css
/* OFF state */
background: #E5E7EB (gray)
circle: white

/* ON state */
background: #10B981 (green)
circle: white + shadow
```

---

## ğŸ” AutenticaciÃ³n (Opcional - Fase 2)

```python
Flask-HTTPAuth==4.8.0

# Simple HTTP Basic Auth
USERNAME = os.getenv('WEB_UI_USERNAME', 'admin')
PASSWORD = os.getenv('WEB_UI_PASSWORD', 'tu_password')
```

---

## ğŸ“± Responsive Design

- **Desktop:** 3 columnas (Simple | Stats | Logs)
- **Tablet:** 2 columnas (Main | Sidebar)
- **Mobile:** 1 columna (Stack vertical)

---

## ğŸš€ Deployment

### **Desarrollo:**
```bash
cd /opt/amz-ml-system
source venv/bin/activate
python3 web_ui/app.py
# http://localhost:5000
```

### **ProducciÃ³n (con nginx):**
```nginx
server {
    listen 80;
    server_name tu-ip-del-vps;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location /socket.io {
        proxy_pass http://127.0.0.1:5000/socket.io;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

### **Systemd Service:**
```ini
[Unit]
Description=AMZ-ML Web UI
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/amz-ml-system
Environment="PATH=/opt/amz-ml-system/venv/bin"
ExecStart=/opt/amz-ml-system/venv/bin/python3 /opt/amz-ml-system/web_ui/app.py
Restart=always

[Install]
WantedBy=multi-user.target
```

---

## âœ… Funcionalidades Clave

### **Modo Simple:**
- [x] Toggle ON/OFF para cada servicio
- [x] EstadÃ­sticas en tiempo real
- [x] Indicadores de estado (ğŸŸ¢ ğŸŸ¡ ğŸ”´)

### **Modo Pro:**
- [x] Editar PRICE_MARKUP (%)
- [x] Editar PRICE_MARKUP_PERCENT (%)
- [x] Editar DEFAULT_PRICE ($)
- [x] Editar DEFAULT_QUANTITY (stock)
- [x] Editar FLORIDA_TAX_PERCENT (%)
- [x] Configurar keywords por ciclo
- [x] Configurar ASINs por keyword
- [x] Editar brand blacklist
- [x] Configurar paÃ­ses target
- [x] Configurar frecuencia backups
- [x] Guardar cambios â†’ Actualiza .env + config JSONs

### **Modo Logs:**
- [x] Stream en tiempo real (WebSocket)
- [x] Filtros por servicio
- [x] Filtros por nivel (Error/Warning/All)
- [x] Descargar logs
- [x] Auto-scroll

---

## ğŸ¯ Prioridad de ImplementaciÃ³n

### **Fase 1: MVP (Esencial)**
1. Modo Simple con toggles
2. Control bÃ¡sico servicios (start/stop/restart)
3. EstadÃ­sticas bÃ¡sicas

### **Fase 2: ConfiguraciÃ³n**
1. Modo Pro con campos editables
2. Guardar config en .env
3. Reiniciar servicios al guardar

### **Fase 3: Logs**
1. Logs en tiempo real
2. Filtros bÃ¡sicos
3. Descargar logs

### **Fase 4: Polish**
1. Modo oscuro
2. AutenticaciÃ³n
3. Notificaciones push
4. Mobile optimization

---

**Total estimado:** ~3-4 horas para Fase 1+2 (lo esencial)

**Implementar despuÃ©s de verificar que el VPS funciona correctamente** âœ…
